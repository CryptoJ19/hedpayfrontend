(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{560:function(e,t,n){var content=n(587);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(15).default)("35b53ddf",content,!0,{sourceMap:!1})},565:function(e,t,n){var map={"./af":414,"./af.js":414,"./ar":415,"./ar-dz":416,"./ar-dz.js":416,"./ar-kw":417,"./ar-kw.js":417,"./ar-ly":418,"./ar-ly.js":418,"./ar-ma":419,"./ar-ma.js":419,"./ar-sa":420,"./ar-sa.js":420,"./ar-tn":421,"./ar-tn.js":421,"./ar.js":415,"./az":422,"./az.js":422,"./be":423,"./be.js":423,"./bg":424,"./bg.js":424,"./bm":425,"./bm.js":425,"./bn":426,"./bn-bd":427,"./bn-bd.js":427,"./bn.js":426,"./bo":428,"./bo.js":428,"./br":429,"./br.js":429,"./bs":430,"./bs.js":430,"./ca":431,"./ca.js":431,"./cs":432,"./cs.js":432,"./cv":433,"./cv.js":433,"./cy":434,"./cy.js":434,"./da":435,"./da.js":435,"./de":436,"./de-at":437,"./de-at.js":437,"./de-ch":438,"./de-ch.js":438,"./de.js":436,"./dv":439,"./dv.js":439,"./el":440,"./el.js":440,"./en-au":441,"./en-au.js":441,"./en-ca":442,"./en-ca.js":442,"./en-gb":443,"./en-gb.js":443,"./en-ie":444,"./en-ie.js":444,"./en-il":445,"./en-il.js":445,"./en-in":446,"./en-in.js":446,"./en-nz":447,"./en-nz.js":447,"./en-sg":448,"./en-sg.js":448,"./eo":449,"./eo.js":449,"./es":450,"./es-do":451,"./es-do.js":451,"./es-mx":452,"./es-mx.js":452,"./es-us":453,"./es-us.js":453,"./es.js":450,"./et":454,"./et.js":454,"./eu":455,"./eu.js":455,"./fa":456,"./fa.js":456,"./fi":457,"./fi.js":457,"./fil":458,"./fil.js":458,"./fo":459,"./fo.js":459,"./fr":460,"./fr-ca":461,"./fr-ca.js":461,"./fr-ch":462,"./fr-ch.js":462,"./fr.js":460,"./fy":463,"./fy.js":463,"./ga":464,"./ga.js":464,"./gd":465,"./gd.js":465,"./gl":466,"./gl.js":466,"./gom-deva":467,"./gom-deva.js":467,"./gom-latn":468,"./gom-latn.js":468,"./gu":469,"./gu.js":469,"./he":470,"./he.js":470,"./hi":471,"./hi.js":471,"./hr":472,"./hr.js":472,"./hu":473,"./hu.js":473,"./hy-am":474,"./hy-am.js":474,"./id":475,"./id.js":475,"./is":476,"./is.js":476,"./it":477,"./it-ch":478,"./it-ch.js":478,"./it.js":477,"./ja":479,"./ja.js":479,"./jv":480,"./jv.js":480,"./ka":481,"./ka.js":481,"./kk":482,"./kk.js":482,"./km":483,"./km.js":483,"./kn":484,"./kn.js":484,"./ko":485,"./ko.js":485,"./ku":486,"./ku.js":486,"./ky":487,"./ky.js":487,"./lb":488,"./lb.js":488,"./lo":489,"./lo.js":489,"./lt":490,"./lt.js":490,"./lv":491,"./lv.js":491,"./me":492,"./me.js":492,"./mi":493,"./mi.js":493,"./mk":494,"./mk.js":494,"./ml":495,"./ml.js":495,"./mn":496,"./mn.js":496,"./mr":497,"./mr.js":497,"./ms":498,"./ms-my":499,"./ms-my.js":499,"./ms.js":498,"./mt":500,"./mt.js":500,"./my":501,"./my.js":501,"./nb":502,"./nb.js":502,"./ne":503,"./ne.js":503,"./nl":504,"./nl-be":505,"./nl-be.js":505,"./nl.js":504,"./nn":506,"./nn.js":506,"./oc-lnc":507,"./oc-lnc.js":507,"./pa-in":508,"./pa-in.js":508,"./pl":509,"./pl.js":509,"./pt":510,"./pt-br":511,"./pt-br.js":511,"./pt.js":510,"./ro":512,"./ro.js":512,"./ru":513,"./ru.js":513,"./sd":514,"./sd.js":514,"./se":515,"./se.js":515,"./si":516,"./si.js":516,"./sk":517,"./sk.js":517,"./sl":518,"./sl.js":518,"./sq":519,"./sq.js":519,"./sr":520,"./sr-cyrl":521,"./sr-cyrl.js":521,"./sr.js":520,"./ss":522,"./ss.js":522,"./sv":523,"./sv.js":523,"./sw":524,"./sw.js":524,"./ta":525,"./ta.js":525,"./te":526,"./te.js":526,"./tet":527,"./tet.js":527,"./tg":528,"./tg.js":528,"./th":529,"./th.js":529,"./tk":530,"./tk.js":530,"./tl-ph":531,"./tl-ph.js":531,"./tlh":532,"./tlh.js":532,"./tr":533,"./tr.js":533,"./tzl":534,"./tzl.js":534,"./tzm":535,"./tzm-latn":536,"./tzm-latn.js":536,"./tzm.js":535,"./ug-cn":537,"./ug-cn.js":537,"./uk":538,"./uk.js":538,"./ur":539,"./ur.js":539,"./uz":540,"./uz-latn":541,"./uz-latn.js":541,"./uz.js":540,"./vi":542,"./vi.js":542,"./x-pseudo":543,"./x-pseudo.js":543,"./yo":544,"./yo.js":544,"./zh-cn":545,"./zh-cn.js":545,"./zh-hk":546,"./zh-hk.js":546,"./zh-mo":547,"./zh-mo.js":547,"./zh-tw":548,"./zh-tw.js":548};function r(e){var t=o(e);return n(t)}function o(e){if(!n.o(map,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return map[e]}r.keys=function(){return Object.keys(map)},r.resolve=o,e.exports=r,r.id=565},585:function(e,t){e.exports="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iOSIgaGVpZ2h0PSI2IiB2aWV3Qm94PSIwIDAgOSA2IiBmaWxsPSJub25lIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPg0KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik04LjIwNzExIDAuNzkyODkzQzguNTk3NjMgMS4xODM0MiA4LjU5NzYzIDEuODE2NTggOC4yMDcxMSAyLjIwNzExTDQuNSA1LjkxNDIxTDAuNzkyODkzIDIuMjA3MTFDMC40MDIzNjggMS44MTY1OCAwLjQwMjM2OSAxLjE4MzQyIDAuNzkyODkzIDAuNzkyODkzQzEuMTgzNDIgMC40MDIzNjkgMS44MTY1OCAwLjQwMjM2OSAyLjIwNzExIDAuNzkyODkzTDQuNSAzLjA4NTc5TDYuNzkyODkgMC43OTI4OTNDNy4xODM0MiAwLjQwMjM2OSA3LjgxNjU4IDAuNDAyMzY5IDguMjA3MTEgMC43OTI4OTNaIiBmaWxsPSJibGFjayIvPg0KPC9zdmc+DQo="},586:function(e,t,n){"use strict";n(560)},587:function(e,t,n){(t=n(14)(!1)).push([e.i,".vdd[data-v-fd47bb36]{position:relative;width:100%}.vdd__icon[data-v-fd47bb36]{margin:0 0 0 8px}.vdd__btn[data-v-fd47bb36]{align-items:center;justify-content:space-between;height:40px;background:#f4f4f4;border-radius:5px;border:none;padding:0 16px;font-family:Roboto;font-style:normal;font-weight:400;font-size:14px;line-height:16px;letter-spacing:.06em;color:rgba(5,43,67,.4)}.vdd__btn[data-v-fd47bb36],.vdd__items[data-v-fd47bb36]{display:flex;width:100%}.vdd__items[data-v-fd47bb36]{z-index:50;border-radius:5px;position:absolute;top:calc(100% + 4px);background:#fff;max-width:100%;box-shadow:0 2px 15px -5px rgba(0,0,0,.15);padding:7px 0;flex-direction:column;max-height:300px;overflow:auto}.vdd__item[data-v-fd47bb36]{cursor:pointer;color:rgba(5,43,67,.8);display:flex;align-content:flex-start;padding:7px 20px}",""]),e.exports=t},590:function(e,t,n){"use strict";var r=[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"vdd__icon"},[t("img",{attrs:{src:n(585)}})])}],o=n(139),l={name:"CustomSelect",directives:{ClickOutside:n.n(o).a},props:{value:{type:String,default:""},options:{type:Array,default:function(){return[]}},id:{type:String,reauired:!0}},data:function(){return{isShown:!1}},methods:{selectDD:function(e){this.$emit("input",e)},toggleDD:function(){this.isShown=!this.isShown},hideDD:function(){this.isShown=!1}}},c=(n(586),n(6)),component=Object(c.a)(l,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"vdd"},[n("button",{directives:[{name:"click-outside",rawName:"v-click-outside",value:function(){return e.hideDD()},expression:"() => hideDD()"}],staticClass:"vdd__btn",on:{click:e.toggleDD}},[n("div",{staticClass:"vdd__value"},[e._t("label",[e._v("\n        "+e._s(e.value)+"\n      ")],{label:e.value})],2),e._v(" "),e._m(0)]),e._v(" "),e.isShown?n("div",{staticClass:"vdd__items"},e._l(e.options,(function(t,i){return n("div",{key:"vdd__item_"+e.id+"-"+i,staticClass:"vdd__item",on:{click:function(n){return e.selectDD(t)}}},[e._t("option",[e._v("\n        "+e._s(t)+"\n      ")],{option:t})],2)})),0):e._e()])}),r,!1,null,"fd47bb36",null);t.a=component.exports},664:function(e,t,n){"use strict";n.r(t);n(21),n(13),n(10),n(7),n(16),n(40),n(23),n(218),n(20);var r=n(1),o=(n(53),n(3)),l=n(139),c=n.n(l),d=n(564),f=n(30),h=n(611),m=(n(604),n(412)),j=n.n(m),v=n(138),y=n(590),D=n(41),w=n(5);function k(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}function x(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?k(Object(source),!0).forEach((function(t){Object(o.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):k(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}t.default={directives:{ClickOutside:c.a},layout:"app",middleware:"auth",components:{Modal:v.a,Qrcode:d.a,DatePicker:h.a,CustomSelect:y.a},data:function(){return{now:j()(String(new Date)).format("DD/MM/YYYY"),identityDocumentItems:["Driver license","National ID card","Passport"],localProfile:{},fieldsValue:{avatar:{},firstName:{required:!0,er:""},middleName:{er:""},lastName:{required:!0,er:""},gender:{type:"gender",er:"",items:[{label:this.$t("profile.fields.gender.male"),value:"M"},{label:this.$t("profile.fields.gender.female"),value:"F"}]},birthDate:{required:!0,type:"date",er:""},country:{type:"country",required:!0,er:""},phone:{type:"phone",required:!0,er:""},identityDocumentNumber:{er:""},shippingState:{er:""},shippingCity:{er:""},shippingStreetName:{required:!0,er:""},shippingBuildingNum:{required:!0,er:""},shippingZip:{required:!0,er:""}},fieldsMain:["firstName","middleName","lastName","gender","birthDate","country","identityDocumentNumber","phone"],fieldsShipping:["shippingState","shippingCity","shippingStreetName","shippingBuildingNum","shippingZip"],fieldsInput:["firstName","lastName","middleName","gender","avatar","birthDate","country","phone","identityDocumentNumber","shippingState","shippingCity","shippingStreetName","shippingBuildingNum","shippingZip"],currentTab:"2FA",tabs:["profile","2FA","verification","change password"],options2FA:{startEnablingProcess:!1,startDisablingProcess:!1,enableProcess:{step:1,key:"",password:"",code:""},disableProcess:{password:"",code:""}},changePass:{show:!1,oldPass:"",newPass:"",repeatNewPass:""},tel:"",verifyPhone:{show:!1,step:1,newPhone:"",code:""},userData:{photo:"",name:"",surname:"",email:"",username:""},isEditData:!1,showCropper:!1}},watch:{profile:function(){this.getData(),this.setDefaultProfile()}},computed:x(x({},Object(f.b)({profile:"user/getProfile",is2FA:"user/is2FA",getDocs:"user/getDocs",availableCountries:"user/availableCountries",countryByCode:"user/countryByCode",getUserStatus:"user/getUserStatus"})),{},{otpLink:function(){return"otpauth://totp/HEdpAY:".concat(this.profile.email,"?secret=").concat(this.options2FA.enableProcess.key,"&issuer=HEdpAY")},getProfileChanges:function(){var e=this,t=[];return this.fieldsInput.forEach((function(n){e.localProfile[n]!==e.profile[n]&&t.push(n)})),t},gender:{get:function(){return this.localProfile.gender},set:function(e){this.localProfile.gender=e.value}},country:{get:function(){return this.localProfile.country},set:function(e){this.localProfile.country=e.code}}}),mounted:function(){this.$store.dispatch("user/".concat(w.GET_USER)),this.getData(),"true"===this.$route.query.show2fa&&this.enable2faOpenModal(),window.history.replaceState({},document.title,this.$route.path),this.fieldsValue.firstName.title=this.$t("profile.fields.firstName"),this.fieldsValue.lastName.title=this.$t("profile.fields.lastName"),this.fieldsValue.middleName.title=this.$t("profile.fields.middleName"),this.fieldsValue.gender.title=this.$t("profile.fields.gender.title"),this.fieldsValue.birthDate.title=this.$t("profile.fields.birthDate"),this.fieldsValue.phone.title="Phone",this.fieldsValue.country.title=this.$t("profile.fields.country"),this.fieldsValue.identityDocumentNumber.title=this.$t("profile.fields.identityDocumentNumber"),this.fieldsValue.shippingState.title="State/province",this.fieldsValue.shippingCity.title=this.$t("profile.fields.shippingCity"),this.fieldsValue.shippingStreetName.title=this.$t("profile.fields.shippingStreetName"),this.fieldsValue.shippingBuildingNum.title=this.$t("profile.fields.shippingBuildingNum"),this.fieldsValue.shippingZip.title=this.$t("profile.fields.shippingZip")},methods:{defineGender:function(e){var t=this.fieldsValue.gender.items.find((function(i){return i.value===e}));return(null==t?void 0:t.label)||""},findCountryByCode:function(code){var e=this.newCountryCodes.find((function(e){return e.code===code}));return e||null},onVerifySubmit:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$store.dispatch("verification/".concat(D.VERIFY_USER));case 3:return n=t.sent,t.next=6,e.$store.dispatch("user/".concat(w.GET_USER));case 6:n.ok?e.$notify({type:"success",text:n.message,closeOnClick:!0}):n.error?e.$notify({type:"error",text:n.error,closeOnClick:!0}):e.$notify({type:"error",text:n.message,closeOnClick:!0}),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),console.log(t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,9]])})))()},cutString:function(e){var t=Math.ceil(e.length/2);if(e.length>12){var n=e.length-10;return"".concat(e.substr(0,t-n/2)).concat(".".repeat(3)).concat(e.substr(t+n/2,e.length))}return e},removeDocFile:function(i){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.fieldsValue.docIdentCopyFile.er="",t.next=3,e.$store.dispatch("user/".concat(w.DEL_DOC),i);case 3:e.$store.dispatch("user/".concat(w.GET_DOC));case 4:case"end":return t.stop()}}),t)})))()},handleImageDoc:function(e){var t=this;return Object(r.a)(regeneratorRuntime.mark((function n(){var r,o;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t.fieldsValue.docIdentCopyFile.er="",r=e.target.files[0],null===e.currentTarget){n.next=20;break}if("image/png"===r.type||"image/jpeg"===r.type||"application/pdf"===r.type){n.next=6;break}return t.fieldsValue.docIdentCopyFile.er="Можно загружать только .jpg, .png, .pdf файлы",n.abrupt("return",null);case 6:if(!(r.size/1024/1024>2)){n.next=9;break}return t.fieldsValue.docIdentCopyFile.er="Слишком большой файл",n.abrupt("return",null);case 9:if(2!==t.getDocs.length){n.next=12;break}return t.fieldsValue.docIdentCopyFile.er="Можно загрузить только 2 файла",n.abrupt("return",null);case 12:if(console.log(!(""!==t.fieldsValue.docIdentCopyFile.er),t.fieldsValue.docIdentCopyFile.er),""!==t.fieldsValue.docIdentCopyFile.er){n.next=20;break}return(o=new FormData).append("file",r),n.next=18,t.$store.dispatch("user/".concat(w.POST_DOC),o);case 18:return n.next=20,t.$store.dispatch("user/".concat(w.GET_DOC),o);case 20:return n.abrupt("return",null);case 21:case"end":return n.stop()}}),n)})))()},setDefaultProfile:function(){this.localProfile=x({},this.profile)},toggleCropper:function(){this.showCropper=!this.showCropper},cropSuccess:function(e){this.localProfile.avatar=e},getData:function(){this.$store.dispatch("user/".concat(w.GET_DOC)),this.userData.email||(this.userData.photo=this.profile.avatar,this.userData.name=this.profile.firstName,this.userData.surname=this.profile.lastName,this.userData.email=this.profile.email,this.userData.username=this.profile.username)},enable2faPrevStep:function(){this.options2FA.enableProcess.step-=1},enable2faNextStep:function(){4!==this.options2FA.enableProcess.step&&(this.options2FA.enableProcess.step+=1)},totpEnable:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$axios.$post("/auth/totp/validate",{password:e.options2FA.enableProcess.password,totp:e.options2FA.enableProcess.code});case 3:e.$store.commit("user/change2faStatus",!0),e.enable2faCloseModal(),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()},enable2faCloseModal:function(){this.options2FA.startEnablingProcess=!1,this.options2FA.enableProcess={step:1,key:"",password:"",code:""}},enable2faOpenModal:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.options2FA.startEnablingProcess=!0,e.options2FA.enableProcess.key){t.next=19;break}return t.prev=2,t.next=5,e.$axios.$get("/auth/totp/temp");case 5:if(!(n=t.sent).result.token){t.next=10;break}e.options2FA.enableProcess.key=n.result.token,t.next=14;break;case 10:return t.next=12,e.$axios.$post("/auth/totp/enable");case 12:r=t.sent,e.options2FA.enableProcess.key=r.result.tempTotp;case 14:t.next=19;break;case 16:t.prev=16,t.t0=t.catch(2),console.log(t.t0);case 19:case"end":return t.stop()}}),t,null,[[2,16]])})))()},disable2faCloseModal:function(){this.options2FA.startDisablingProcess=!1,this.options2FA.disableProcess={password:"",code:""}},disable2faOpenModal:function(){this.options2FA.startDisablingProcess=!0},totpDisable:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$axios.$post("/auth/totp/disable",{password:e.options2FA.disableProcess.password,totp:e.options2FA.disableProcess.code});case 3:e.$store.commit("user/change2faStatus",!1),e.disable2faCloseModal(),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()},toggleChangePassModal:function(){this.changePass.show=!this.changePass.show,this.changePass.oldPass="",this.changePass.newPass="",this.changePass.repeatNewPass=""},toggleVerifyPhoneModal:function(){this.verifyPhone.show=!this.verifyPhone.show},verifyPhoneRetryCode:function(){},verifyPhoneNext:function(){this.verifyPhone.step++},editDataToggle:function(){this.isEditData=!this.isEditData},checkEr:function(){var e=this;return this.fieldsInput.forEach((function(t){if(e.fieldsValue[t].required&&""===e.localProfile[t]&&(e.fieldsValue[t].er="Обязательное поле"),"identityDocumentExpDate"===t&&e.localProfile[t]){var n=e.now.split("/"),r=e.localProfile[t].split("/");(+r[2]<+n[2]||+r[2]==+n[2]&&+r[1]<+n[1]||+r[2]==+n[2]&&+r[1]==+n[1]&&+r[0]<+n[0])&&(console.log("Истек"),e.fieldsValue[t].er="Истек")}})),-1!==this.fieldsInput.map((function(t){return""!==e.fieldsValue[t].er})).indexOf(!0)},clearEr:function(){var e=this;this.fieldsInput.forEach((function(t){e.fieldsValue[t].er=""}))},changeUserData:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){var n,r,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.clearEr(),0!==e.getProfileChanges.length){t.next=4;break}return e.editDataToggle(),t.abrupt("return");case 4:return n=e.getProfileChanges.find((function(e){return"avatar"===e})),r=n?e.localProfile:x(x({},e.localProfile),{},{avatar:void 0}),t.prev=6,t.next=9,e.$store.dispatch("user/".concat(w.CHANGE_PROFILE),r);case 9:(o=t.sent)&&o.ok?(e.editDataToggle(),e.$notify({type:"success",text:o.message,closeOnClick:!0})):e.$notify({type:"error",text:(null==o?void 0:o.errorField)||(null==o?void 0:o.message),closeOnClick:!0}),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(6),console.log(t.t0);case 16:case"end":return t.stop()}}),t,null,[[6,13]])})))()},changePassword:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$axios.$put("/profile/me/password",{oldPassword:e.changePass.oldPass,newPassword:e.changePass.newPass});case 2:e.toggleChangePassModal();case 3:case"end":return t.stop()}}),t)})))()}}}}}]);